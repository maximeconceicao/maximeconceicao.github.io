{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineComponent, ref, onMounted } from \"vue\";\nimport SweetGameSequence from \"@/components/SweetGame/SweetGameSequence.vue\";\nimport SweetGameCells from \"@/components/SweetGame/SweetGameCells.vue\";\nimport SweetGameButtons from \"@/components/SweetGame/SweetGameButtons.vue\";\nimport SweetGameTimer from \"@/components/SweetGame/SweetGameTimer.vue\";\nimport { SHAPES, START_SEQUENCE_LENGTH } from \"@/helpers/game.constants\";\nimport { random } from \"@/helpers/utils.js\";\nexport default defineComponent({\n  name: \"GameView\",\n  components: {\n    SweetGameSequence,\n    SweetGameCells,\n    SweetGameButtons,\n    SweetGameTimer\n  },\n  setup() {\n    let sequenceLength = START_SEQUENCE_LENGTH;\n    let sequenceToFind = ref([]);\n    let playerSequence = ref([]);\n    let score = ref(0);\n    function resetGame() {\n      sequenceLength = START_SEQUENCE_LENGTH;\n      resetSequences();\n    }\n    function resetSequences() {\n      sequenceToFind.value = generateStartingSequence(sequenceLength);\n      playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n    }\n    function generateStartingSequence(sequenceLength) {\n      const generatedSequence = [];\n      for (let i = 0; i < sequenceLength; i++) {\n        let indexOfShape = Math.floor(random(0, Object.keys(SHAPES).length));\n        generatedSequence.push(Object.values(SHAPES)[indexOfShape]);\n      }\n      return generatedSequence;\n    }\n    function resetPlayerSequence(sequenceLength) {\n      return Array.apply(null, Array(sequenceLength)).map(() => {\n        return null;\n      });\n    }\n    function onDrawShape(shape) {\n      const index = playerSequence.value.findIndex(shape => shape === null);\n      if (index > -1) {\n        playerSequence.value[index] = shape;\n      } else {\n        playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n      }\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n    function onClear() {\n      playerSequence.value = resetPlayerSequence(sequenceLength);\n    }\n    function validateSequence() {\n      if (JSON.stringify(playerSequence.value) === JSON.stringify(sequenceToFind.value)) {\n        score.value += 1;\n        sequenceLength += 1;\n        resetSequences();\n      }\n    }\n    function onReverse() {\n      let playerSequenceCopy = [...playerSequence.value];\n      playerSequenceCopy.forEach((shape, index) => {\n        switch (shape) {\n          case SHAPES.STAR:\n            playerSequence.value[index] = SHAPES.TRIANGLE;\n            break;\n          case SHAPES.SQUARE:\n            playerSequence.value[index] = SHAPES.CIRCLE;\n            break;\n          case SHAPES.TRIANGLE:\n            playerSequence.value[index] = SHAPES.STAR;\n            break;\n          case SHAPES.CIRCLE:\n            playerSequence.value[index] = SHAPES.SQUARE;\n            break;\n        }\n      });\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n    onMounted(() => {\n      resetGame();\n      console.log(\"PLAYER SEQUENCE \", playerSequence.value.at(-1));\n    });\n    return {\n      sequenceToFind,\n      playerSequence,\n      score,\n      onDrawShape,\n      onReverse,\n      onClear\n    };\n  }\n});","map":{"version":3,"names":["defineComponent","ref","onMounted","SweetGameSequence","SweetGameCells","SweetGameButtons","SweetGameTimer","SHAPES","START_SEQUENCE_LENGTH","random","name","components","setup","sequenceLength","sequenceToFind","playerSequence","score","resetGame","resetSequences","value","generateStartingSequence","resetPlayerSequence","length","generatedSequence","i","indexOfShape","Math","floor","Object","keys","push","values","Array","apply","map","onDrawShape","shape","index","findIndex","at","validateSequence","onClear","JSON","stringify","onReverse","playerSequenceCopy","forEach","STAR","TRIANGLE","SQUARE","CIRCLE","console","log"],"sources":["/Users/maximeconceicao/personal_repos/sweet-portfolio/src/views/GameView.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"sticky-header\">\n      <header>\n        <router-link :to=\"{ name: 'home' }\"\n          ><span class=\"material-icons\">arrow_back</span></router-link\n        >\n      </header>\n    </div>\n    <main id=\"main-game\">\n      <div class=\"game-header\">\n        <p class=\"game-score\">{{ score }}</p>\n\n        <sweet-game-timer />\n      </div>\n      <sweet-game-sequence :sequenceToFind=\"sequenceToFind\" />\n      <sweet-game-cells\n        v-if=\"playerSequence?.length\"\n        :playerSequence=\"playerSequence\"\n      />\n      <sweet-game-buttons\n        @drawShape=\"onDrawShape\"\n        @reverse=\"onReverse\"\n        @clear=\"onClear\"\n      />\n    </main>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from \"vue\";\nimport SweetGameSequence from \"@/components/SweetGame/SweetGameSequence.vue\";\nimport SweetGameCells from \"@/components/SweetGame/SweetGameCells.vue\";\nimport SweetGameButtons from \"@/components/SweetGame/SweetGameButtons.vue\";\nimport SweetGameTimer from \"@/components/SweetGame/SweetGameTimer.vue\";\n\nimport { SHAPES, START_SEQUENCE_LENGTH } from \"@/helpers/game.constants\";\nimport { random } from \"@/helpers/utils.js\";\n\nexport default defineComponent({\n  name: \"GameView\",\n  components: {\n    SweetGameSequence,\n    SweetGameCells,\n    SweetGameButtons,\n    SweetGameTimer,\n  },\n  setup() {\n    let sequenceLength = START_SEQUENCE_LENGTH;\n    let sequenceToFind = ref([]);\n    let playerSequence = ref([]);\n    let score = ref(0);\n\n    function resetGame() {\n      sequenceLength = START_SEQUENCE_LENGTH;\n      resetSequences();\n    }\n\n    function resetSequences() {\n      sequenceToFind.value = generateStartingSequence(sequenceLength);\n      playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n    }\n\n    function generateStartingSequence(sequenceLength) {\n      const generatedSequence = [];\n      for (let i = 0; i < sequenceLength; i++) {\n        let indexOfShape = Math.floor(random(0, Object.keys(SHAPES).length));\n        generatedSequence.push(Object.values(SHAPES)[indexOfShape]);\n      }\n      return generatedSequence;\n    }\n\n    function resetPlayerSequence(sequenceLength) {\n      return Array.apply(null, Array(sequenceLength)).map(() => {\n        return null;\n      });\n    }\n\n    function onDrawShape(shape) {\n      const index = playerSequence.value.findIndex((shape) => shape === null);\n\n      if (index > -1) {\n        playerSequence.value[index] = shape;\n      } else {\n        playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n      }\n\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n\n    function onClear() {\n      playerSequence.value = resetPlayerSequence(sequenceLength);\n    }\n\n    function validateSequence() {\n      if (\n        JSON.stringify(playerSequence.value) ===\n        JSON.stringify(sequenceToFind.value)\n      ) {\n        score.value += 1;\n        sequenceLength += 1;\n        resetSequences();\n      }\n    }\n\n    function onReverse() {\n      let playerSequenceCopy = [...playerSequence.value];\n      playerSequenceCopy.forEach((shape, index) => {\n        switch (shape) {\n          case SHAPES.STAR:\n            playerSequence.value[index] = SHAPES.TRIANGLE;\n            break;\n          case SHAPES.SQUARE:\n            playerSequence.value[index] = SHAPES.CIRCLE;\n            break;\n          case SHAPES.TRIANGLE:\n            playerSequence.value[index] = SHAPES.STAR;\n            break;\n          case SHAPES.CIRCLE:\n            playerSequence.value[index] = SHAPES.SQUARE;\n            break;\n        }\n      });\n\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n\n    onMounted(() => {\n      resetGame();\n      console.log(\"PLAYER SEQUENCE \", playerSequence.value.at(-1));\n    });\n    return {\n      sequenceToFind,\n      playerSequence,\n      score,\n      onDrawShape,\n      onReverse,\n      onClear,\n    };\n  },\n});\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}