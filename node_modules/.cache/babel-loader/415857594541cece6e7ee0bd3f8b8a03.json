{"ast":null,"code":"import \"core-js/modules/es.array.at.js\";\nimport \"core-js/modules/es.string.at-alternative.js\";\nimport { defineComponent, ref, onMounted } from \"vue\";\nimport SweetGameSequence from \"@/components/SweetGameSequence.vue\";\nimport SweetGameCells from \"@/components/SweetGameCells.vue\";\nimport SweetGameButtons from \"@/components/SweetGameButtons.vue\";\nimport { SHAPES, START_SEQUENCE_LENGTH } from \"@/helpers/game.constants\";\nimport { random } from \"@/helpers/utils.js\";\nexport default defineComponent({\n  name: \"GameView\",\n  components: {\n    SweetGameSequence,\n    SweetGameCells,\n    SweetGameButtons\n  },\n\n  setup() {\n    let sequenceToFind = ref([]);\n    let playerSequence = ref([]);\n    let score = 0;\n\n    function resetGame() {\n      sequenceToFind.value = generateStartingSequence(START_SEQUENCE_LENGTH);\n      playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n    }\n\n    function generateStartingSequence(sequenceLength) {\n      const generatedSequence = [];\n\n      for (let i = 0; i < START_SEQUENCE_LENGTH; i++) {\n        let indexOfShape = Math.floor(random(0, Object.keys(SHAPES).length));\n        generatedSequence.push(Object.values(SHAPES)[indexOfShape]);\n      }\n\n      return generatedSequence;\n    }\n\n    function resetPlayerSequence(sequenceLength) {\n      return Array.apply(null, Array(sequenceLength)).map(() => {\n        return null;\n      });\n    }\n\n    function onDrawShape(shape) {\n      console.log(\"On Draw Shape ! \", shape, playerSequence.value);\n      const index = playerSequence.value.findIndex(shape => shape === null);\n\n      if (index > -1) {\n        playerSequence.value[index] = shape;\n      } else {\n        playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n      }\n    }\n\n    function onReverse() {\n      console.log(\"REVERSE !\"); //let playerSequenceCopy = JSON.parse(JSON.stringify(playerSequence.copy));\n\n      let playerSequenceCopy = [...playerSequence.value];\n\n      for (let [shape, index] in playerSequence.value) {\n        console.log(\"SHAPE REVERSE : \", shape);\n\n        switch (shape) {\n          case SHAPES.STAR:\n            playerSequenceCopy[index] = SHAPES.TRIANGLE;\n            break;\n\n          case SHAPES.SQUARE:\n            playerSequenceCopy[index] = SHAPES.CIRCLE;\n            break;\n\n          case SHAPES.TRIANGLE:\n            playerSequenceCopy[index] = SHAPES.STAR;\n            break;\n\n          case SHAPES.CIRCLE:\n            playerSequenceCopy[index] = SHAPES.SQUARE;\n            break;\n        }\n\n        console.log(\"PLAYER SEQUENCE COPY :\", playerSequenceCopy);\n        playerSequence.value = playerSequenceCopy;\n      }\n    }\n\n    onMounted(() => {\n      resetGame();\n      console.log(\"PLAYER SEQUENCE \", playerSequence.value.at(-1));\n    });\n    return {\n      sequenceToFind,\n      playerSequence,\n      onDrawShape,\n      onReverse\n    };\n  }\n\n});","map":{"version":3,"mappings":";;AAYA,SAASA,eAAT,EAA0BC,GAA1B,EAA+BC,SAA/B,QAAgD,KAAhD;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,SAASC,MAAT,EAAiBC,qBAAjB,QAA8C,0BAA9C;AACA,SAASC,MAAT,QAAuB,oBAAvB;AAEA,eAAeR,eAAe,CAAC;AAC7BS,MAAI,EAAE,UADuB;AAE7BC,YAAU,EAAE;AAAEP,qBAAF;AAAqBC,kBAArB;AAAqCC;AAArC,GAFiB;;AAG7BM,OAAK,GAAG;AACN,QAAIC,cAAa,GAAIX,GAAG,CAAC,EAAD,CAAxB;AACA,QAAIY,cAAa,GAAIZ,GAAG,CAAC,EAAD,CAAxB;AACA,QAAIa,KAAI,GAAI,CAAZ;;AAEA,aAASC,SAAT,GAAqB;AACnBH,oBAAc,CAACI,KAAf,GAAuBC,wBAAwB,CAACV,qBAAD,CAA/C;AACAM,oBAAc,CAACG,KAAf,GAAuBE,mBAAmB,CAACN,cAAc,CAACI,KAAf,CAAqBG,MAAtB,CAA1C;AACF;;AAEA,aAASF,wBAAT,CAAkCG,cAAlC,EAAkD;AAChD,YAAMC,iBAAgB,GAAI,EAA1B;;AACA,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIf,qBAApB,EAA2Ce,CAAC,EAA5C,EAAgD;AAC9C,YAAIC,YAAW,GAAIC,IAAI,CAACC,KAAL,CAAWjB,MAAM,CAAC,CAAD,EAAIkB,MAAM,CAACC,IAAP,CAAYrB,MAAZ,EAAoBa,MAAxB,CAAjB,CAAnB;AACAE,yBAAiB,CAACO,IAAlB,CAAuBF,MAAM,CAACG,MAAP,CAAcvB,MAAd,EAAsBiB,YAAtB,CAAvB;AACF;;AACA,aAAOF,iBAAP;AACF;;AAEA,aAASH,mBAAT,CAA6BE,cAA7B,EAA6C;AAC3C,aAAOU,KAAK,CAACC,KAAN,CAAY,IAAZ,EAAkBD,KAAK,CAACV,cAAD,CAAvB,EAAyCY,GAAzC,CAA6C,MAAM;AACxD,eAAO,IAAP;AACD,OAFM,CAAP;AAGF;;AAEA,aAASC,WAAT,CAAqBC,KAArB,EAA4B;AAC1BC,aAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCF,KAAhC,EAAuCrB,cAAc,CAACG,KAAtD;AACA,YAAMqB,KAAI,GAAIxB,cAAc,CAACG,KAAf,CAAqBsB,SAArB,CAAgCJ,KAAD,IAAWA,KAAI,KAAM,IAApD,CAAd;;AAEA,UAAIG,KAAI,GAAI,CAAC,CAAb,EAAgB;AACdxB,sBAAc,CAACG,KAAf,CAAqBqB,KAArB,IAA8BH,KAA9B;AACF,OAFA,MAEO;AACLrB,sBAAc,CAACG,KAAf,GAAuBE,mBAAmB,CAACN,cAAc,CAACI,KAAf,CAAqBG,MAAtB,CAA1C;AACF;AACF;;AAEA,aAASoB,SAAT,GAAqB;AACnBJ,aAAO,CAACC,GAAR,CAAY,WAAZ,EADmB,CAEnB;;AACA,UAAII,kBAAiB,GAAI,CAAC,GAAG3B,cAAc,CAACG,KAAnB,CAAzB;;AAEA,WAAK,IAAI,CAACkB,KAAD,EAAQG,KAAR,CAAT,IAA2BxB,cAAc,CAACG,KAA1C,EAAiD;AAC/CmB,eAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCF,KAAhC;;AACA,gBAAQA,KAAR;AACE,eAAK5B,MAAM,CAACmC,IAAZ;AACED,8BAAkB,CAACH,KAAD,CAAlB,GAA4B/B,MAAM,CAACoC,QAAnC;AACA;;AACF,eAAKpC,MAAM,CAACqC,MAAZ;AACEH,8BAAkB,CAACH,KAAD,CAAlB,GAA4B/B,MAAM,CAACsC,MAAnC;AACA;;AACF,eAAKtC,MAAM,CAACoC,QAAZ;AACEF,8BAAkB,CAACH,KAAD,CAAlB,GAA4B/B,MAAM,CAACmC,IAAnC;AACA;;AACF,eAAKnC,MAAM,CAACsC,MAAZ;AACEJ,8BAAkB,CAACH,KAAD,CAAlB,GAA4B/B,MAAM,CAACqC,MAAnC;AACA;AAZJ;;AAcAR,eAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCI,kBAAtC;AACA3B,sBAAc,CAACG,KAAf,GAAuBwB,kBAAvB;AACF;AACF;;AAEAtC,aAAS,CAAC,MAAM;AACda,eAAS;AACToB,aAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCvB,cAAc,CAACG,KAAf,CAAqB6B,EAArB,CAAwB,CAAC,CAAzB,CAAhC;AACD,KAHQ,CAAT;AAIA,WAAO;AAAEjC,oBAAF;AAAkBC,oBAAlB;AAAkCoB,iBAAlC;AAA+CM;AAA/C,KAAP;AACD;;AAtE4B,CAAD,CAA9B","names":["defineComponent","ref","onMounted","SweetGameSequence","SweetGameCells","SweetGameButtons","SHAPES","START_SEQUENCE_LENGTH","random","name","components","setup","sequenceToFind","playerSequence","score","resetGame","value","generateStartingSequence","resetPlayerSequence","length","sequenceLength","generatedSequence","i","indexOfShape","Math","floor","Object","keys","push","values","Array","apply","map","onDrawShape","shape","console","log","index","findIndex","onReverse","playerSequenceCopy","STAR","TRIANGLE","SQUARE","CIRCLE","at"],"sourceRoot":"","sources":["/home/maxime/personal_repos/sweet-portfolio/src/views/GameView.vue"],"sourcesContent":["<template>\n  <main id=\"main-game\">\n    <sweet-game-sequence :sequenceToFind=\"sequenceToFind\" />\n    <sweet-game-cells\n      v-if=\"playerSequence?.length\"\n      :playerSequence=\"playerSequence\"\n    />\n    <sweet-game-buttons @drawShape=\"onDrawShape\" @reverse=\"onReverse\" />\n  </main>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from \"vue\";\nimport SweetGameSequence from \"@/components/SweetGameSequence.vue\";\nimport SweetGameCells from \"@/components/SweetGameCells.vue\";\nimport SweetGameButtons from \"@/components/SweetGameButtons.vue\";\nimport { SHAPES, START_SEQUENCE_LENGTH } from \"@/helpers/game.constants\";\nimport { random } from \"@/helpers/utils.js\";\n\nexport default defineComponent({\n  name: \"GameView\",\n  components: { SweetGameSequence, SweetGameCells, SweetGameButtons },\n  setup() {\n    let sequenceToFind = ref([]);\n    let playerSequence = ref([]);\n    let score = 0;\n\n    function resetGame() {\n      sequenceToFind.value = generateStartingSequence(START_SEQUENCE_LENGTH);\n      playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n    }\n\n    function generateStartingSequence(sequenceLength) {\n      const generatedSequence = [];\n      for (let i = 0; i < START_SEQUENCE_LENGTH; i++) {\n        let indexOfShape = Math.floor(random(0, Object.keys(SHAPES).length));\n        generatedSequence.push(Object.values(SHAPES)[indexOfShape]);\n      }\n      return generatedSequence;\n    }\n\n    function resetPlayerSequence(sequenceLength) {\n      return Array.apply(null, Array(sequenceLength)).map(() => {\n        return null;\n      });\n    }\n\n    function onDrawShape(shape) {\n      console.log(\"On Draw Shape ! \", shape, playerSequence.value);\n      const index = playerSequence.value.findIndex((shape) => shape === null);\n\n      if (index > -1) {\n        playerSequence.value[index] = shape;\n      } else {\n        playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n      }\n    }\n\n    function onReverse() {\n      console.log(\"REVERSE !\");\n      //let playerSequenceCopy = JSON.parse(JSON.stringify(playerSequence.copy));\n      let playerSequenceCopy = [...playerSequence.value];\n\n      for (let [shape, index] in playerSequence.value) {\n        console.log(\"SHAPE REVERSE : \", shape);\n        switch (shape) {\n          case SHAPES.STAR:\n            playerSequenceCopy[index] = SHAPES.TRIANGLE;\n            break;\n          case SHAPES.SQUARE:\n            playerSequenceCopy[index] = SHAPES.CIRCLE;\n            break;\n          case SHAPES.TRIANGLE:\n            playerSequenceCopy[index] = SHAPES.STAR;\n            break;\n          case SHAPES.CIRCLE:\n            playerSequenceCopy[index] = SHAPES.SQUARE;\n            break;\n        }\n        console.log(\"PLAYER SEQUENCE COPY :\", playerSequenceCopy);\n        playerSequence.value = playerSequenceCopy;\n      }\n    }\n\n    onMounted(() => {\n      resetGame();\n      console.log(\"PLAYER SEQUENCE \", playerSequence.value.at(-1));\n    });\n    return { sequenceToFind, playerSequence, onDrawShape, onReverse };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module"}