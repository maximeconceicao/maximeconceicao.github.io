{"ast":null,"code":"import \"core-js/modules/es.array.at.js\";\nimport \"core-js/modules/es.string.at-alternative.js\";\nimport { defineComponent, ref, onMounted } from \"vue\";\nimport SweetGameSequence from \"@/components/SweetGameSequence.vue\";\nimport SweetGameCells from \"@/components/SweetGameCells.vue\";\nimport SweetGameButtons from \"@/components/SweetGameButtons.vue\";\nimport { SHAPES, START_SEQUENCE_LENGTH } from \"@/helpers/game.constants\";\nimport { random } from \"@/helpers/utils.js\";\nexport default defineComponent({\n  name: \"GameView\",\n  components: {\n    SweetGameSequence,\n    SweetGameCells,\n    SweetGameButtons\n  },\n\n  setup() {\n    let sequenceLength = START_SEQUENCE_LENGTH;\n    let sequenceToFind = ref([]);\n    let playerSequence = ref([]);\n    let score = ref(0);\n\n    function resetGame() {\n      sequenceLength = START_SEQUENCE_LENGTH;\n      resetSequences();\n    }\n\n    function resetSequences() {\n      sequenceToFind.value = generateStartingSequence(sequenceLength);\n      playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n    }\n\n    function generateStartingSequence(sequenceLength) {\n      console.log(\"GENERATE SEQUENCE : \", sequenceLength);\n      const generatedSequence = [];\n\n      for (let i = 0; i < sequenceLength; i++) {\n        let indexOfShape = Math.floor(random(0, Object.keys(SHAPES).length));\n        generatedSequence.push(Object.values(SHAPES)[indexOfShape]);\n      }\n\n      return generatedSequence;\n    }\n\n    function resetPlayerSequence(sequenceLength) {\n      return Array.apply(null, Array(sequenceLength)).map(() => {\n        return null;\n      });\n    }\n\n    function onDrawShape(shape) {\n      console.log(\"On Draw Shape ! \", shape, playerSequence.value);\n      const index = playerSequence.value.findIndex(shape => shape === null);\n\n      if (index > -1) {\n        playerSequence.value[index] = shape;\n      } else {\n        playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n      }\n\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n\n    function onClear() {\n      console.log(\"CLEAR\");\n      playerSequence = resetPlayerSequence(sequenceLength);\n    }\n\n    function validateSequence() {\n      if (JSON.stringify(playerSequence.value) === JSON.stringify(sequenceToFind.value)) {\n        console.log(\"VALIDATE SEQUENCE\", sequenceLength);\n        score.value += 1;\n        sequenceLength += 1;\n        resetSequences();\n      } else {\n        console.log(\"LOOSE !\");\n      }\n    }\n\n    function onReverse() {\n      let playerSequenceCopy = [...playerSequence.value];\n      playerSequenceCopy.forEach((shape, index) => {\n        switch (shape) {\n          case SHAPES.STAR:\n            playerSequence.value[index] = SHAPES.TRIANGLE;\n            break;\n\n          case SHAPES.SQUARE:\n            playerSequence.value[index] = SHAPES.CIRCLE;\n            break;\n\n          case SHAPES.TRIANGLE:\n            playerSequence.value[index] = SHAPES.STAR;\n            break;\n\n          case SHAPES.CIRCLE:\n            playerSequence.value[index] = SHAPES.SQUARE;\n            break;\n        }\n      });\n\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n\n    onMounted(() => {\n      resetGame();\n      console.log(\"PLAYER SEQUENCE \", playerSequence.value.at(-1));\n    });\n    return {\n      sequenceToFind,\n      playerSequence,\n      score,\n      onDrawShape,\n      onReverse,\n      onClear\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["defineComponent","ref","onMounted","SweetGameSequence","SweetGameCells","SweetGameButtons","SHAPES","START_SEQUENCE_LENGTH","random","name","components","setup","sequenceLength","sequenceToFind","playerSequence","score","resetGame","resetSequences","value","generateStartingSequence","resetPlayerSequence","length","console","log","generatedSequence","i","indexOfShape","Math","floor","Object","keys","push","values","Array","apply","map","onDrawShape","shape","index","findIndex","at","validateSequence","onClear","JSON","stringify","onReverse","playerSequenceCopy","forEach","STAR","TRIANGLE","SQUARE","CIRCLE"],"sourceRoot":"","sources":["/home/maxime/personal_repos/sweet-portfolio/src/views/GameView.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"sticky-header\">\n      <header>\n        <router-link :to=\"{ name: 'home' }\"\n          ><span class=\"material-icons\">arrow_back</span></router-link\n        >\n      </header>\n    </div>\n    <main id=\"main-game\">\n      <sweet-game-sequence :sequenceToFind=\"sequenceToFind\" />\n      <sweet-game-cells\n        v-if=\"playerSequence?.length\"\n        :playerSequence=\"playerSequence\"\n      />\n      <sweet-game-buttons\n        @drawShape=\"onDrawShape\"\n        @reverse=\"onReverse\"\n        @clear=\"onClear\"\n      />\n      <p class=\"game-score\">SCORE : {{ score }}</p>\n    </main>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from \"vue\";\nimport SweetGameSequence from \"@/components/SweetGameSequence.vue\";\nimport SweetGameCells from \"@/components/SweetGameCells.vue\";\nimport SweetGameButtons from \"@/components/SweetGameButtons.vue\";\nimport { SHAPES, START_SEQUENCE_LENGTH } from \"@/helpers/game.constants\";\nimport { random } from \"@/helpers/utils.js\";\n\nexport default defineComponent({\n  name: \"GameView\",\n  components: { SweetGameSequence, SweetGameCells, SweetGameButtons },\n  setup() {\n    let sequenceLength = START_SEQUENCE_LENGTH;\n    let sequenceToFind = ref([]);\n    let playerSequence = ref([]);\n    let score = ref(0);\n\n    function resetGame() {\n      sequenceLength = START_SEQUENCE_LENGTH;\n      resetSequences();\n    }\n\n    function resetSequences() {\n      sequenceToFind.value = generateStartingSequence(sequenceLength);\n      playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n    }\n\n    function generateStartingSequence(sequenceLength) {\n      console.log(\"GENERATE SEQUENCE : \", sequenceLength);\n      const generatedSequence = [];\n      for (let i = 0; i < sequenceLength; i++) {\n        let indexOfShape = Math.floor(random(0, Object.keys(SHAPES).length));\n        generatedSequence.push(Object.values(SHAPES)[indexOfShape]);\n      }\n      return generatedSequence;\n    }\n\n    function resetPlayerSequence(sequenceLength) {\n      return Array.apply(null, Array(sequenceLength)).map(() => {\n        return null;\n      });\n    }\n\n    function onDrawShape(shape) {\n      console.log(\"On Draw Shape ! \", shape, playerSequence.value);\n      const index = playerSequence.value.findIndex((shape) => shape === null);\n\n      if (index > -1) {\n        playerSequence.value[index] = shape;\n      } else {\n        playerSequence.value = resetPlayerSequence(sequenceToFind.value.length);\n      }\n\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n\n    function onClear() {\n      console.log(\"CLEAR\");\n      playerSequence = resetPlayerSequence(sequenceLength);\n    }\n\n    function validateSequence() {\n      if (\n        JSON.stringify(playerSequence.value) ===\n        JSON.stringify(sequenceToFind.value)\n      ) {\n        console.log(\"VALIDATE SEQUENCE\", sequenceLength);\n        score.value += 1;\n        sequenceLength += 1;\n        resetSequences();\n      } else {\n        console.log(\"LOOSE !\");\n      }\n    }\n\n    function onReverse() {\n      let playerSequenceCopy = [...playerSequence.value];\n      playerSequenceCopy.forEach((shape, index) => {\n        switch (shape) {\n          case SHAPES.STAR:\n            playerSequence.value[index] = SHAPES.TRIANGLE;\n            break;\n          case SHAPES.SQUARE:\n            playerSequence.value[index] = SHAPES.CIRCLE;\n            break;\n          case SHAPES.TRIANGLE:\n            playerSequence.value[index] = SHAPES.STAR;\n            break;\n          case SHAPES.CIRCLE:\n            playerSequence.value[index] = SHAPES.SQUARE;\n            break;\n        }\n      });\n\n      if (playerSequence.value.at(-1)) {\n        validateSequence();\n      }\n    }\n\n    onMounted(() => {\n      resetGame();\n      console.log(\"PLAYER SEQUENCE \", playerSequence.value.at(-1));\n    });\n    return {\n      sequenceToFind,\n      playerSequence,\n      score,\n      onDrawShape,\n      onReverse,\n      onClear,\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module"}